# Multi-Tenancy with Accounts Configuration
# Demonstrates account isolation and import/export

port: 4226

accounts: {
  # Account A - Exports public and private streams/services
  A: {
    users: [
      {user: user_a, password: pass_a}
    ]
    exports: [
      # Public stream - anyone can import
      {stream: puba.>}
      
      # Public service - anyone can import
      {service: pubq.>}
      
      # Private stream - only account B can import
      {stream: b.>, accounts: [B]}
      
      # Private service - only account B can import
      {service: q.b, accounts: [B]}
    ]
  }

  # Account B - Imports private exports from A
  B: {
    users: [
      {user: user_b, password: pass_b}
    ]
    imports: [
      # Import private stream from A
      {stream: {account: A, subject: b.>}}
      
      # Import private service from A
      {service: {account: A, subject: q.b}}
    ]
  }

  # Account C - Imports public exports from A with remapping
  C: {
    users: [
      {user: user_c, password: pass_c}
    ]
    imports: [
      # Import public stream with prefix
      {stream: {account: A, subject: puba.>}, prefix: from_a}
      
      # Import public service with remapping
      {service: {account: A, subject: pubq.C}, to: Q}
    ]
  }
}

# Allow unauthenticated connections to use user_a in account A
no_auth_user: user_a
